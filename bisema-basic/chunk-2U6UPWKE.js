import{a as N}from"./chunk-ZPI3W37Y.js";import{a as W}from"./chunk-WLCVJLAU.js";import{c as K}from"./chunk-TRIEGNN6.js";import{a as A,b as v,c as P,d as D,f as G,h as U,i as q,j as B,k as H,l as R,m as z,n as J}from"./chunk-RJXIIXZ4.js";import{a as Q}from"./chunk-2WQDYZB5.js";import{Ab as r,Bb as _,Cc as j,Fc as L,Hb as O,Ib as T,Jb as b,Na as a,Qb as I,S as V,X as w,Y as f,_a as C,aa as k,cb as c,gb as i,hb as t,ib as y,ja as p,ka as d,mb as S,nb as g,ob as u,rb as E,sc as $,xc as M,zb as F}from"./chunk-G5ZMSHET.js";import"./chunk-EQDQRRRY.js";var x=class o{constructor(n){this._http=n}apiUrl=L.api_url;get(){return this._http.get(`${this.apiUrl}categories`)}create(n){return this._http.post(`${this.apiUrl}categories`,n)}update(n,e){return this._http.post(`${this.apiUrl}categories/${e}`,n)}delete(n){return this._http.delete(`${this.apiUrl}categories/${n}`)}static \u0275fac=function(e){return new(e||o)(w(j))};static \u0275prov=V({token:o,factory:o.\u0275fac})};var Z=()=>({label1:"Company"}),ee=()=>({label1:"Catalogue"}),te=()=>({label1:"Name"}),ie=()=>({label1:"Pagee Number"});function ne(o,n){if(o&1){let e=S();i(0,"tr")(1,"th",8),r(2),t(),i(3,"td")(4,"div",9)(5,"h5",10),r(6),t()()(),i(7,"td"),r(8),t(),i(9,"td"),r(10),t(),i(11,"td"),r(12),t(),i(13,"td")(14,"div",9)(15,"a",11),g("click",function(){let l=p(e).$implicit,s=u(),h=F(25);return d(s.openModal(h,l))}),r(16,"Edit"),t(),i(17,"a",12),g("click",function(){let l=p(e).$implicit,s=u();return d(s.delete(l.id))}),r(18,"Delete"),t()()()()}if(o&2){let e=n.$implicit,m=n.index;a(2),_(m+1),a(4),_(e.name),a(2),_(e.page_num),a(2),_(e.catalogue.name),a(2),_(e.catalogue.company.name)}}function re(o,n){if(o&1&&(i(0,"option",30),r(1),t()),o&2){let e=n.$implicit;E("value",e.id),a(),_(e.name)}}function oe(o,n){if(o&1&&(i(0,"option",30),r(1),t()),o&2){let e=n.$implicit;E("value",e.id),a(),_(e.name)}}function ae(o,n){if(o&1){let e=S();i(0,"div",13)(1,"h4",14),r(2,"Category"),t(),i(3,"button",15),g("click",function(){let l=p(e).$implicit,s=u();return l.dismiss("Cross click"),d(s.categoryForm.reset())}),t()(),i(4,"div",16)(5,"form",17)(6,"div",18)(7,"div")(8,"label",19),r(9,"Company"),t(),i(10,"select",20),g("change",function(){p(e);let l=u();return d(l.getCatalogues())}),i(11,"option",21),r(12,"Select Company"),t(),C(13,re,2,2,"option",22),t()(),i(14,"label",23),y(15,"app-form-error-message",24),t()(),i(16,"div",18)(17,"div")(18,"label",19),r(19,"Catalogues"),t(),i(20,"select",25)(21,"option",21),r(22,"Select Catalogue"),t(),C(23,oe,2,2,"option",22),t()(),i(24,"label",23),y(25,"app-form-error-message",24),t()(),i(26,"div",18)(27,"div")(28,"label",19),r(29,"Category Name"),t(),y(30,"input",26),t(),i(31,"label",23),y(32,"app-form-error-message",24),t()(),i(33,"div",18)(34,"div")(35,"label",19),r(36,"Page Number"),t(),y(37,"input",27),t(),i(38,"label",23),y(39,"app-form-error-message",24),t()(),i(40,"div",28)(41,"button",29),g("click",function(){let l=p(e).$implicit,s=u();return l.dismiss("Cross click"),d(s.categoryForm.reset())}),r(42,"Close"),t(),i(43,"button",3),g("click",function(){p(e);let l=u();return d(l.submit())}),r(44,"Save"),t()()()()}if(o&2){let e=u();a(5),c("formGroup",e.categoryForm),a(8),c("ngForOf",e.companies),a(2),c("control",e.categoryForm.get("company_id"))("labels",b(11,Z)),a(8),c("ngForOf",e.catalogues),a(2),c("control",e.categoryForm.get("catalogue_id"))("labels",b(12,ee)),a(7),c("control",e.categoryForm.get("name"))("labels",b(13,te)),a(7),c("control",e.categoryForm.get("page_num"))("labels",b(14,ie))}}var X=class o{_companyService=f(N);_mainService=f(Q);_categoryService=f(x);_formBuilder=f(z);modalService=f(K);companies=[];catalogues=[];categories=[];selectedCategory=null;categoryForm=this._formBuilder.group({company_id:["",[v.required]],catalogue_id:["",[v.required]],name:["",[v.required]],page_num:["",[v.required]]});getCompanies(){this._companyService.get().subscribe({next:n=>{this.companies=n.data}})}getCatalogues(){this._mainService.getCatalogues(this.categoryForm.value.company_id).subscribe({next:n=>{this.catalogues=n.data}})}get(){this._categoryService.get().subscribe({next:n=>{this.categories=n.data}})}openModal(n,e=null){this.selectedCategory=e,e&&this.categoryForm.patchValue({name:e.name,page_num:e.page_num,company_id:e.catalogue.company_id,catalogue_id:e.catalogue.id}),this.modalService.open(n,{centered:!0,size:"lg"})}submit(){let n=this.categoryForm.value;if(this.selectedCategory){n._method="PATCH",this._categoryService.update(n,this.selectedCategory.id).subscribe({next:e=>{this.get(),this.modalService.dismissAll()}});return}this._categoryService.create(n).subscribe({next:e=>{this.get(),this.modalService.dismissAll()}})}delete(n){this._categoryService.delete(n).subscribe({next:e=>{this.get()}})}ngOnInit(){this.getCompanies(),this.get()}static \u0275fac=function(e){return new(e||o)};static \u0275cmp=k({type:o,selectors:[["app-category"]],standalone:!0,features:[O([N,x]),T],decls:26,vars:1,consts:[["content",""],[1,"px-3"],[1,"mt-5","d-flex","justify-content-between"],["type","button",1,"btn","btn2",3,"click"],[1,"mt-3"],[1,"table"],["scope","col"],[4,"ngFor","ngForOf"],["scope","row"],[1,"d-flex"],[1,"ms-1"],["href","javascript:;",1,"text-decoration-none",3,"click"],["href","javascript:;",1,"ms-2","text-decoration-none","text-danger",3,"click"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"form-group","mb-1"],[1,"form-label"],["formControlName","company_id",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"text-danger"],["fieldType","input",3,"control","labels"],["formControlName","catalogue_id",1,"form-control"],["type","text","placeholder","Category Name","formControlName","name",1,"form-control"],["type","text","placeholder","Page Number","formControlName","page_num",1,"form-control"],[1,"mt-3","d-flex","justify-content-end"],["type","button",1,"btn","btn-danger","me-2",3,"click"],[3,"value"]],template:function(e,m){if(e&1){let l=S();i(0,"div",1)(1,"div",2)(2,"h2"),r(3,"Categories"),t(),i(4,"button",3),g("click",function(){p(l);let h=F(25);return d(m.openModal(h))}),r(5," Add Category "),t()(),i(6,"section",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th",6),r(11,"#"),t(),i(12,"th",6),r(13,"Name"),t(),i(14,"th",6),r(15,"Page Number"),t(),i(16,"th",6),r(17,"Catalogue"),t(),i(18,"th",6),r(19,"Company"),t(),i(20,"th"),r(21,"Actions"),t()()(),i(22,"tbody"),C(23,ne,19,5,"tr",7),t()()()(),C(24,ae,45,15,"ng-template",null,0,I)}e&2&&(a(23),c("ngForOf",m.categories))},dependencies:[M,$,J,G,H,R,A,B,P,D,U,q,W]})};export{X as CategoryComponent};
